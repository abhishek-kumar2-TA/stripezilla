"use strict";(self.webpackChunkstorybook_react19=self.webpackChunkstorybook_react19||[]).push([[4271],{"../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../packages/react/dist/graphs/node/RenderGraph/style.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".node-graph-tooltip::before {\n  content: '';\n  position: absolute;\n  top: -10px;\n  left: 16px;\n  margin-left: -5px;\n  border-width: 5px;\n  border-style: solid;\n  border-color: transparent transparent rgba(0, 0, 0, 0.8) transparent;\n}\n","",{version:3,sources:["webpack://./../../packages/react/dist/graphs/node/RenderGraph/style.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,kBAAkB;EAClB,UAAU;EACV,UAAU;EACV,iBAAiB;EACjB,iBAAiB;EACjB,mBAAmB;EACnB,oEAAoE;AACtE",sourcesContent:[".node-graph-tooltip::before {\n  content: '';\n  position: absolute;\n  top: -10px;\n  left: 16px;\n  margin-left: -5px;\n  border-width: 5px;\n  border-style: solid;\n  border-color: transparent transparent rgba(0, 0, 0, 0.8) transparent;\n}\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/graphs/hierarchialGraph.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CodeAndAccessibility:()=>CodeAndAccessibility,__namedExportsOrder:()=>__namedExportsOrder,default:()=>hierarchialGraph_stories});var react=__webpack_require__("../../node_modules/react/index.js"),grid=__webpack_require__("../../packages/react/dist/grid/index.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),dagre=__webpack_require__("../../node_modules/@dagrejs/dagre/index.js"),dagre_default=__webpack_require__.n(dagre),src=__webpack_require__("../../node_modules/d3/src/index.js"),client=__webpack_require__("../../node_modules/react-dom/client.js"),injectStylesIntoStyleTag=__webpack_require__("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("../../node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("../../node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),style=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../packages/react/dist/graphs/node/RenderGraph/style.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(style.A,options);style.A&&style.A.locals&&style.A.locals;const node_RenderGraph=({nodes:t,edges:e,direction:r,width:o,height:a,nodeRadius:l=80,initialAnimationDelay:n=650,defaultNodebackgroundColor:s="#61dafb",defaultFontSize:d=12,defaultFontColor:i="#1D1B1A",defaultEdgeColor:c="#555",defaultEdgeLabelColor:y="#555",defaultEdgeLabelHoverColor:f="#1c1c1c"})=>{const p=(0,react.useRef)(null),u=(0,react.useRef)(null),x=(0,react.useRef)(!0);return(0,react.useEffect)((()=>{if(!p.current)return;const h=src.Ltv(p.current);h.selectAll("*").remove();const g=h.append("g"),m=src.s_O().scaleExtent([.1,10]).on("start",(t=>{h.style("cursor","grabbing")})).on("zoom",(t=>{g.attr("transform",t.transform)})).on("end",(()=>{h.style("cursor","default")}));h.call(m),h.append("defs").append("marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("refX",9).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill",c);const b=src.Ltv("body").append("div").attr("class","node-graph-tooltip").style("position","absolute").style("pointer-events","none").style("padding","6px 10px").style("background","rgba(0, 0, 0, 0.8)").style("color","#fff").style("border-radius","4px").style("font-size","14px").style("display","none").style("z-index","10999");u.current=b;const w=g.append("g").attr("class","edges");w.selectAll("path.edge").data(e).enter().append("path").attr("class","edge").attr("fill","none").attr("stroke",c).attr("stroke-width",1.5).attr("marker-end","url(#arrow)").on("mouseover",(function(t,e){src.Ltv(this).attr("stroke",c).attr("stroke-width",2),k.selectAll("text.edge-label").filter((t=>t===e)).attr("fill",f).attr("font-weight","bold")})).on("mouseout",(function(t,e){src.Ltv(this).attr("stroke",c).attr("stroke-width",1.5),k.selectAll("text.edge-label").filter((t=>t===e)).attr("fill",y).attr("font-weight","normal")}));const k=g.append("g").attr("class","edge-labels"),z=k.selectAll("text.edge-label").data(e).enter().append("text").attr("class","edge-label").attr("text-anchor","middle").attr("fill",y).attr("font-size",d).text((t=>t.label||"")),v=g.append("g").selectAll(".node").data(t).enter().append("g").attr("class","node").attr("transform",(t=>`translate(${t.x},${t.y})`));function C(){w.selectAll("path.edge").attr("d",(e=>{const o=e,a=t.find((t=>t.id===o.source)),n=t.find((t=>t.id===o.target)),s="horizontal"===r?{x:a.x+l/2,y:a.y}:{x:a.x,y:a.y+l/2},d="horizontal"===r?{x:n.x-l/2,y:n.y}:{x:n.x,y:n.y-l/2},i=src.AeT(),c="horizontal"===r?(d.x-s.x)/2:(d.y-s.y)/2;return i.moveTo(s.x,s.y),"horizontal"===r?i.bezierCurveTo(s.x+c,s.y,d.x-c,d.y,d.x,d.y):i.bezierCurveTo(s.x,s.y+c,d.x,d.y-c,d.x,d.y),i.toString()})),z.attr("x",(e=>{const o=t.find((t=>t.id===e.source)),a=t.find((t=>t.id===e.target)),n="horizontal"===r?{x:o.x+l/2,y:o.y}:{x:o.x,y:o.y+l/2},s="horizontal"===r?{x:a.x-l/2,y:a.y}:{x:a.x,y:a.y-l/2};return(n.x+s.x)/2})).attr("y",(e=>{const o=t.find((t=>t.id===e.source)),a=t.find((t=>t.id===e.target)),n="horizontal"===r?{x:o.x+l/2,y:o.y}:{x:o.x,y:o.y+l/2},s="horizontal"===r?{x:a.x-l/2,y:a.y}:{x:a.x,y:a.y-l/2};return(n.y+s.y)/2-5}))}if(v.append("circle").attr("r",l/2).attr("fill",(t=>t.nodeBackgroundColor||s)),v.each((function(t){if(t.sublabel){const e=src.Ltv(this).append("foreignObject").attr("x",-l).attr("y",l/2+5).attr("width",2*l).attr("height","24px"),r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.display="flex",r.style.justifyContent="center",(0,client.H)(r).render(t.sublabel),e.node()?.appendChild(r)}})),v.append("foreignObject").attr("x",-l/2).attr("y",-l/2).attr("width",l).attr("height",l).each((function(t){if(t.label){const e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.fontSize=`${d}px`,e.style.wordBreak="break-word",e.style.color=i,t.tooltip&&(e.onmouseover=()=>{b.style("display","block").html("");const e=document.createElement("div");(0,client.H)(e).render(t.tooltip),b.node()?.appendChild(e)},e.onmousemove=t=>{const e=this.getBoundingClientRect();b.style("left",`${e.left+e.width/4}px`).style("top",`${e.top+e.height/1.1}px`)},e.onmouseleave=()=>{b.style("display","none").html("")}),(0,client.H)(e).render(t.label),this.appendChild(e)}})),C(),x.current&&o&&a){const t=g.node().getBBox();let e=Math.min(2*o/t.width,2*a/t.height);(e>1||0===e)&&(e=1);const r=(o-t.width*e)/2-t.x*e,l=(a-t.height*e)/2-t.y*e,s=src.GSI.translate(r,l).scale(e);g.transition().duration(n).attr("transform",s),setTimeout((()=>{h.call(m.transform,s)}),n),x.current=!1}const R=src.$Er().on("start",(function(t,e){src.Ltv(this).raise().select("circle").attr("stroke","#000")})).on("drag",(function(t,e){e.x=t.x,e.y=t.y,src.Ltv(this).attr("transform",`translate(${e.x},${e.y})`),C()})).on("end",(function(){src.Ltv(this).select("circle").attr("stroke",null)}));return v.call(R),()=>{b.remove()}}),[t,e,r,o]),(0,jsx_runtime.jsx)("svg",{ref:p,width:o,height:a})};const HierarchialGraph=e=>{const{data:t,direction:r="horizontal",nodeRadius:a=80,...o}=e,{ref:i,size:d}=(()=>{const e=(0,react.useRef)(null),[t,n]=(0,react.useState)({width:0,height:0});return(0,react.useEffect)((()=>{const t=e.current;if(!t)return;const r=new ResizeObserver((e=>{for(const t of e){const{width:e,height:r}=t.contentRect;n({width:e,height:r})}}));return r.observe(t),()=>r.disconnect()}),[]),{ref:e,size:t}})(),[n,s]=(0,react.useState)([]),[h]=(0,react.useState)((()=>`hg-${Date.now()}-${Math.floor(1e3*Math.random())}`));return(0,react.useEffect)((()=>{const e=function calculateLayout(e,t,r){const a=new(dagre_default().graphlib.Graph);return a.setGraph({rankdir:"horizontal"===t?"LR":"TB",nodesep:70,ranksep:150}),a.setDefaultEdgeLabel((()=>({}))),e.nodes.forEach((e=>a.setNode(e.id,{width:r,height:r}))),e.edges.forEach((e=>a.setEdge(e.source,e.target))),dagre_default().layout(a),a}(t,r,a),o=t.nodes.map((t=>{const r=e.node(t.id);return{...t,x:r.x,y:r.y}}));s(o)}),[t,r]),(0,jsx_runtime.jsx)("div",{ref:i,id:h,style:{width:"100%",height:"400px"},children:!!n.length&&(0,jsx_runtime.jsx)(node_RenderGraph,{graphId:h,nodes:n,nodeRadius:a,edges:t.edges,width:d.width,height:d.height,direction:r,...o})})};var utils=__webpack_require__("./src/utils/index.ts");const hierarchialGraph_stories={title:"Graph/hierarchial graph",component:HierarchialGraph,parameters:{controls:{expanded:!0}},argTypes:{data:{description:"nodes and edges of type:`{` `nodes: {` `id: string;` `label: ReactNode;` `sublabel?: ReactNode;` `nodeBackgroundColor?: string;` `tooltip?: ReactNode;` `}[];`        `edges:  {` `source: string;` `target: string;` `label?: string; }[]`        `}`",control:!1},direction:{options:["horizontal","vertical"],description:"direction of the graph",table:{defaultValue:{summary:"horizontal"}},control:{type:"select"}},nodeRadius:{description:"radius of graph nodes",table:{defaultValue:{summary:"80"}},control:{type:"number"}},defaultFontSize:{description:"default font-size within graph",table:{defaultValue:{summary:"12"}},control:{type:"number"}},defaultNodebackgroundColor:{description:"default node background color",table:{defaultValue:{summary:"61dafb"}},control:{type:"color"}},defaultFontColor:{description:"default node font color within graph",table:{defaultValue:{summary:"#61dafb"}},control:{type:"color"}},initialAnimationDelay:{description:"animation delay for scaling the graph",table:{defaultValue:{summary:"650"}},control:{type:"number"}},defaultEdgeColor:{description:"default edge line color",table:{defaultValue:{summary:"#555"}},control:{type:"color"}},defaultEdgeLabelColor:{description:"default edge label color",table:{defaultValue:{summary:"#555"}},control:{type:"color"}},defaultEdgeLabelHoverColor:{description:"default edge label hover color",table:{defaultValue:{summary:"#1c1c1c"}},control:{type:"color"}}}},CodeAndAccessibility=(args=>react.createElement(grid.E,{showSideMargin:!1},react.createElement(utils.Tx,{importStatement:"import { HierarchialGraph } from '@stripezilla/react/graphs';"}),react.createElement(grid.H,{style:{gap:"10px"}},react.createElement(HierarchialGraph,args)),react.createElement(grid.H,null,react.createElement("div",{className:"story-title"},"       ")),react.createElement(grid.H,null,react.createElement(utils.ur,{description:"A full page Loader component"})))).bind({});CodeAndAccessibility.args={data:{nodes:[{id:"1",label:"Parent",nodeBackgroundColor:"red",sublabel:"SUB",tooltip:"toltip"},{id:"2",label:"Child A"},{id:"3",label:"Child B"},{id:"4",label:"Grandchild"},{id:"5",label:"Parent B"}],edges:[{source:"1",target:"3",label:"has B"},{source:"1",target:"2",label:"has A"},{source:"2",target:"4",label:"leads to"},{source:"3",target:"4",label:"leads to"},{source:"5",target:"2",label:"has A"}]},direction:"horizontal",nodeRadius:80,initialAnimationDelay:650,defaultNodebackgroundColor:"#61dafb",defaultFontSize:12,defaultFontColor:"#1D1B1A",defaultEdgeColor:"#555",defaultEdgeLabelColor:"#555",defaultEdgeLabelHoverColor:"#1c1c1c"};const __namedExportsOrder=["CodeAndAccessibility"];CodeAndAccessibility.parameters={...CodeAndAccessibility.parameters,docs:{...CodeAndAccessibility.parameters?.docs,source:{originalSource:"args => {\n  return <GridContainer showSideMargin={false}>\n      <ImportBlock importStatement={`import { HierarchialGraph } from '@stripezilla/react/graphs';`} />\n      <GridColumn style={{\n      gap: '10px'\n    }}>\n        <HierarchialGraph {...args} />\n      </GridColumn>\n      <GridColumn>\n        <div className=\"story-title\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\n      </GridColumn>\n      <GridColumn>\n        <DescriptionBlock description={description} />\n      </GridColumn>\n    </GridContainer>;\n}",...CodeAndAccessibility.parameters?.docs?.source}}}},"./src/utils/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{bO:()=>CommentBlock,ur:()=>DescriptionBlock,Tx:()=>ImportBlock});var grid=__webpack_require__("../../packages/react/dist/grid/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const ImportBlockDiv=styled_components_browser_esm.Ay.div`
  padding-bottom: 10px;
  border-bottom: 1px solid var(--colors-primary-base);
  margin-bottom: 10px;
  width: 100%;
`,ImportBlock=({importStatement})=>react.createElement(grid.H,null,react.createElement(ImportBlockDiv,null,importStatement));ImportBlock.__docgenInfo={description:"",methods:[],displayName:"ImportBlock",props:{importStatement:{required:!0,tsType:{name:"ReactNode"},description:""}}};const DescriptionBeforeSpacer=(0,styled_components_browser_esm.Ay)(grid.H)`
  border-bottom: 1px solid var(--colors-primary-base);
  font-weight: bold;
`,DescriptionContent=(0,styled_components_browser_esm.Ay)(grid.H)`
  font-size: 14px;
`,DescriptionBlock=({description})=>react.createElement(grid.E,{showSideMargin:!1},react.createElement(grid.H,null,react.createElement(DescriptionBeforeSpacer,null,"       ")),react.createElement(DescriptionContent,null,description));DescriptionBlock.__docgenInfo={description:"",methods:[],displayName:"DescriptionBlock",props:{description:{required:!0,tsType:{name:"ReactNode"},description:""}}};const CommentContainer=styled_components_browser_esm.Ay.div`
  width: 100%;
  font-size: 12px;
  color: var(--colors-success-base);
  display: flex;
  flex-wrap: wrap;
`,CommentBlock=({children})=>react.createElement(CommentContainer,null,children);CommentBlock.__docgenInfo={description:"",methods:[],displayName:"CommentBlock",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}}},"../../packages/react/dist/grid/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>GridColumn,E:()=>GridContainer});var styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const GridColumn=styled_components_browser_esm.Ay.div`
  grid-column: ${e=>`span ${e.sm||e.theme.grid.small.columns}`};
  display: ${e=>0===e.sm?"none":"flex"};
  flex-direction: column;
  align-items: flex-start;

  ${({theme:e,md:n,lg:m})=>styled_components_browser_esm.AH`
    @media screen and (min-width: ${`${e.breakpoints.medium}`}) {
      grid-column: ${e=>`span ${n||m||e.theme.grid.medium.columns}`};
      display: ${0===n?"none":"flex"};
    }

    @media screen and (min-width: ${`${e.breakpoints.large}`}) {
      grid-column: ${e=>`span ${m||e.theme.grid.large.columns}`};
      display: ${0===m?"none":"flex"};
    }
  `}
`,GridContainer=styled_components_browser_esm.Ay.div`
  display: grid;
  width: 100%;
  grid-gap: ${({theme:i})=>i.grid.small.gutter};
  grid-template-columns: repeat(${({theme:i})=>i.grid.small.columns}, 1fr);
  grid-template-rows: initial;
  grid-auto-rows: initial;
  margin: 0;
  max-width: 100%;
  grid-column: span ${({theme:i})=>i.grid.small.columns};

  ${({showSideMargin:i})=>i&&styled_components_browser_esm.AH`
      max-width: calc(100% - ${({theme:i})=>i.grid.small.margin} * 2);
      margin-left: ${({theme:i})=>i.grid.small.margin} !important;
      margin-right: ${({theme:i})=>i.grid.small.margin} !important;
    `}

  ${({restrictHeightToMaxContent:i})=>i&&styled_components_browser_esm.AH`
      grid-template-rows: max-content;
      grid-auto-rows: max-content;
    `}

  @media screen and (min-width: 768px) {
    grid-template-columns: repeat(${({theme:i})=>i.grid.medium.columns}, 1fr);
    margin: 0;
    grid-gap: ${({theme:i})=>i.grid.medium.gutter};
    max-width: 100%;
    grid-column: span ${({theme:i})=>i.grid.medium.columns};

    ${({showSideMargin:i})=>i&&styled_components_browser_esm.AH`
        max-width: calc(100% - ${({theme:i})=>i.grid.medium.margin} * 2);
        margin-left: ${({theme:i})=>i.grid.medium.margin} !important;
        margin-right: ${({theme:i})=>i.grid.medium.margin} !important;
      `}
  }

  @media screen and (min-width: 1200px) {
    grid-template-columns: repeat(${({theme:i})=>i.grid.large.columns}, 1fr);
    margin: 0;
    grid-gap: ${({theme:i})=>i.grid.large.gutter};
    grid-column: span ${({theme:i})=>i.grid.large.columns};

    ${({showSideMargin:i})=>i&&styled_components_browser_esm.AH`
        max-width: calc(100% - ${({theme:i})=>i.grid.large.margin} * 2);
        margin-left: ${({theme:i})=>i.grid.large.margin} !important;
        margin-right: ${({theme:i})=>i.grid.large.margin} !important;
      `}
  }
`}}]);
//# sourceMappingURL=graphs-hierarchialGraph-stories.1f335d43.iframe.bundle.js.map